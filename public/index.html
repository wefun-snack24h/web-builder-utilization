<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ì›¹ ë¹Œë” ì½”ë“œ ìƒì„±</title>
<style>
  * {
    margin: 0;
    padding: 0;
  }

  .modules {
    max-width: 1100px;
    min-height: 100vh;
    margin: 0 auto;
    display: flex;
    flex-flow: column;
    row-gap: 35px;
    padding: 70px 0 50px;
  }

  .module {
    display: flex;
    width: 100%;
    column-gap: 20px;
  }

  .module__form {
    display: flex;
    width: 45%;
    flex-direction: column;
    gap: 25px;
  }

  .module__code {
    flex: 1;
    display: flex;
    justify-content: center;
    flex-flow: column;
  }

  .form-label {
    display: inline-block;
    font-weight: 700;
    padding-bottom: 5px;
  }

  .form-desc {
    font-size: 14px;
    color: #8f8f8f;
    padding-bottom: 7px;
  }

  .form-label-wrap {
    display: flex;
    align-items: center;
  }

  strong {
    display: block;
    padding-bottom: 5px;
  }

  button {
    padding: 5px;
    background-color: rgba(2, 117, 255, 0.8);
    border: none;
    min-height: 40px;
    color: #fff;
    font-weight: 700;
    font-size: 14px;
    cursor: pointer;
  }

  button.line {
    background-color: #fff;
    border: 1px solid #0275ff;
    color: #0275ff;
    border-radius: 8px;
  }

  button:hover {
    background-color: rgba(2, 117, 255, 0.9);
  }

  button:active {
    background-color: rgba(2, 117, 255, 1);
  }

  button.line:hover {
    background-color: rgba(2, 117, 255, 0.05);
  }

  button.line:active {
    background-color: rgba(2, 117, 255, 0.1);
  }

  textarea {
    resize: none;
    height: 100%;
    border-bottom: none;
    padding: 10px;
  }

  input[type=text] {
    width: calc(100% - 25px);
    height: 30px;
    padding: 0 10px;
  }

  h1 {
    margin-bottom: 20px;
  }

  h2 {
    display: flex;
    align-items: center;
    font-size: 24px;
    line-height: 26px;
  }

  h2::before {
    content: '';
    width: 5px;
    height: 22px;
    background-color: #0275ff;
    border: 5px;
    margin-right: 10px;
  }

  hr {
    margin: 60px 0;
    color: #fff;
    border: 1px;
  }

  hr.divider {
    margin: 10px 0px;
    border-width: 1px 0 0 0;
    border-style: dashed;
    border-color: #bbb;
  }

  label {
    display: inline-block;
    font-size: 15px;
    padding-right: 8px;
    padding-bottom: 5px;
  }

  .tagging-input-key {
    width: 200px !important;
  }

  .tagging-input-wrap {
    display: flex;
    margin-bottom: 5px;
    gap: 5px;
  }

  .set-data {
    margin-bottom: 5px;
  }

</style>
</head>
<body>
<div>
<div class="modules">
  <h1>ì½”ë“œ ìƒì„±í•˜ê¸° ğŸ‘¾</h1>
  <!-- tagging -->
  <div class="module">
    <div class="module__form">
      <h2>GA</h2>
      <div>
        <strong>ìœ„ì¹˜</strong>
        <input type="radio" id="position-a" value="ìƒë‹¨" name="position" checked/>
        <label for="position-a">ìƒë‹¨</label>
        <input type="radio" id="position-b" value="ë©”ì¸" name="position"/>
        <label for="position-b">ë©”ì¸</label>
        <input type="radio" id="position-c" value="ì¤‘ê°„" name="position"/>
        <label for="position-c">ì¤‘ê°„</label>
        <input type="radio" id="position-d" value="í”Œë¡œíŒ…" name="position"/>
        <label for="position-d">í”Œë¡œíŒ…</label>
        <input type="radio" id="position-e" value="í•˜ë‹¨" name="position"/>
        <label for="position-e">í•˜ë‹¨</label>
      </div>
      <div>
        <strong>ë²„íŠ¼ëª…</strong>
        <p class="form-desc">ë²„íŠ¼ëª…ì´ ì—†ëŠ” ê²½ìš° ì½”ë“œë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì‹œë©´ ë©ë‹ˆë‹¤.</p>
        <input type="radio" id="button-a" value="ë¬´ë£Œ ìƒë‹´í•˜ê¸°" name="button" checked/>
        <label for="button-a">ë¬´ë£Œ ìƒë‹´í•˜ê¸°</label>
        <input type="radio" id="button-b" value="5ì´ˆ ë§Œì— ìƒë‹´ë°›ê¸°" name="button"/>
        <label for="button-b">5ì´ˆ ë§Œì— ìƒë‹´ë°›ê¸°</label>
        <input type="radio" id="button-d" value="ë¬´ë£Œ ìƒë‹´ ì‹ ì²­" name="button"/>
        <label for="button-d">ë¬´ë£Œ ìƒë‹´ ì‹ ì²­</label>
        <input type="radio" id="button-e" value="ìƒë‹´ ì‹ ì²­í•˜ê¸°" name="button"/>
        <label for="button-e">ìƒë‹´ ì‹ ì²­í•˜ê¸°</label>
        <br/>
        <input type="radio" id="button-c" value="ì†Œê°œì„œ ë°›ê¸°" name="button"/>
        <label for="button-c">ì†Œê°œì„œ ë°›ê¸°</label>
      </div>
      <div>
        <span class="form-label">ì„œë¹„ìŠ¤ëª…</span> <input type="text" id="service"/>
      </div>
      <div>
        <span class="form-label">ì„œë¸Œì„œë¹„ìŠ¤ëª…</span> <input type="text" id="sub-service"/>
      </div>
      <button class="line" onclick="handleCLickGtmTagging()">ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    </div>
    <div class="module__code">
      <textarea id="result__1"></textarea>
      <button onclick="handleCopy('1')">ì½”ë“œ ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>

  <hr class="divider">

  <!-- Tagging set data -->
  <div class="module">
    <div class="module__form">
      <div>
        <span class="form-label">Tagging ì´ë²¤íŠ¸ëª…</span>
        <input type="text" id="tagging-id"/>
      </div>
      <div>
        <span class="form-label">Tagging ì•¡ì…˜ëª…</span>
        <input type="text" id="tagging-action"/>
      </div>
      <div id="tagging-set-data">
        <div class="form-label-wrap">
          <span class="form-label" style="flex: 1">ì‚½ì…í•  tagging ë°ì´í„°</span>
          <button style="width: 100px" onclick="handleClickAddTagging()">ì¶”ê°€</button>
        </div>
        <p class="form-desc">ë¹ˆ ê°’ì¸ ê²½ìš° ì‚½ì…ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        <div class="tagging-input-wrap">
          <input type="text" class="tagging-input-key" placeholder="ìˆ˜ì§‘í•  ì´ë²¤íŠ¸ ëª…"/>
          <input type="text" class="tagging-input-value" placeholder="ìˆ˜ì§‘í•  ê°’" />
        </div>
      </div>
      <button class="line" onclick="handleClickOpenTaggingAndSetData()">ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    </div>
    <div class="module__code">
      <textarea id="result__1-2"></textarea>
      <button onclick="handleCopy('1-2')">ì½”ë“œ ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>

  <hr />

  <!-- Tally -->
  <div class="module">
    <div class="module__form">
      <h2>Tally</h2>
      <div>
        <span class="form-label">Tally Modal ID</span>
        <input type="text" id="tally-url1"/>
      </div>
      <button class="line" onclick="handleClickOpenTally()">ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    </div>
    <div class="module__code">
      <textarea id="result__2-1"></textarea>
      <button onclick="handleCopy('2-1')">ì½”ë“œ ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>

  <hr class="divider">

  <!-- Tally set data -->
  <div class="module">
    <div class="module__form">
      <div>
        <span class="form-label">Tally Modal ID</span>
        <input type="text" id="tally-url2"/>
      </div>
      <div id="tally-set-data">
        <div class="form-label-wrap">
          <span class="form-label" style="flex: 1">ì‚½ì… ë°ì´í„°</span>
          <button style="width: 100px" onclick="handleClickAdd()">ì¶”ê°€</button>
        </div>
        <p class="form-desc">tally param ì¶”ê°€: ì˜ˆ) product_name=ë¸Œë¼ìš´ ì»¤í”¼ 1kg</p>
        <input type="text" class="set-data"/>
      </div>
      <button class="line" onclick="handleClickOpenTallyAndSetData()">ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    </div>
    <div class="module__code">
      <textarea id="result__2-2"></textarea>
      <button onclick="handleCopy('2-2')">ì½”ë“œ ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>

  <hr />

  <!-- open in new URL -->
  <div class="module">
    <div class="module__form">
      <h2>URL</h2>
      <div>
        <span class="form-label">URL</span>
        <p class="form-desc">ì…ë ¥í•œ URLì´ ìƒˆ ì°½ìœ¼ë¡œ ì—´ë¦½ë‹ˆë‹¤.</p>
        <input type="text" id="form__3-1"/>
      </div>
      <button class="line" onclick="handleClickOpenInNewTab('3-1')">ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    </div>
    <div class="module__code">
      <textarea id="result__3-1"></textarea>
      <button onclick="handleCopy('3-1')">ì½”ë“œ ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>

  <hr class="divider">

  <!-- change link of current tab -->
  <div class="module">
    <div class="module__form">
      <div>
        <span class="form-label">URL</span>
        <p class="form-desc">ì…ë ¥í•œ URLë¡œ í˜„ì¬ ì°½ì—ì„œ í˜ì´ì§€ê°€ ì „í™˜ë©ë‹ˆë‹¤.</p>
        <input type="text" id="form__3-2"/>
      </div>
      <button class="line" onclick="handleClickChangeLinkOfCurrentTab('3-2')">ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    </div>
    <div class="module__code">
      <textarea id="result__3-2"></textarea>
      <button onclick="handleCopy('3-2')">ì½”ë“œ ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>

  <hr />

  <!-- handleClickUrl -->
  <div class="module">
    <div class="module__form">
      <h2>Home</h2>
      <div>
        <span class="form-label">í™ˆ ì¹´í…Œê³ ë¦¬(íƒ­) ë‚´ ì„œë¹„ìŠ¤ URL open</span>
        <p class="form-desc">ê´€ë¦¬ì í˜ì´ì§€ì—ì„œëŠ” ìƒˆ ì°½ìœ¼ë¡œ, ì‹ ê·œ ì„œë¹„ìŠ¤ì—ì„œëŠ” í˜„ì¬ ì°½ì—ì„œ í˜ì´ì§€ê°€ ì „í™˜ë©ë‹ˆë‹¤.</p>
        <input type="text" id="new-service-url"/>
      </div>
      <button class="line" onclick="handleClickUrl()">ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    </div>
    <div class="module__code">
      <textarea id="result__4-1"></textarea>
      <button onclick="handleCopy('4-1')">ì½”ë“œ ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>

  <hr class="divider">

  <!-- handleChangeHomeCategory -->
  <div class="module">
    <div class="module__form">
      <div>
        <span class="form-label">í™ˆ ì¹´í…Œê³ ë¦¬(íƒ­) ì „í™˜ pathname</span>
        <p class="form-desc">ì˜ˆì‹œ) https://snack24gd.imweb.me/service ì—ì„œ serviceë¥¼ ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤.</p>
        <input type="text" id="home-tab-pathname"/>
      </div>
      <button class="line" onclick="handleChangeHomeCategory()">ì½”ë“œ ìƒì„±í•˜ê¸°</button>
    </div>
    <div class="module__code">
      <textarea id="result__4-2"></textarea>
      <button onclick="handleCopy('4-2')">ì½”ë“œ ë³µì‚¬í•˜ê¸°</button>
    </div>
  </div>

  <hr />

  <div>
    <h3 style="padding-bottom: 10px">ì½”ë“œëŠ” ë””ìì¸ ëª¨ë“œ > ê° ì»¨í…ì¸ ì˜ ì„¤ì •ì°½ì—ì„œ [ì½”ë“œ] ì˜ì—­ì— ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤.</h3>
    <p class="form-desc">ì—¬ëŸ¬ ê°œì˜ ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤ë©´ ë³µì‚¬í•œ ì½”ë“œë¥¼ ìˆœì„œëŒ€ë¡œ ì´ì–´ ë¶™ì—¬ ë„£ì–´ì£¼ì„¸ìš”.</p>
    <img src="./assets/desc.png" style="width: 80%;">
  </div>
</div>
</div>

<script>
function handleCopy(id) {
  window.navigator.clipboard.writeText(`${document.getElementById(`result__${id}`).value}`)
}

function handleCLickGtmTagging() {
  const service = document.getElementById("service").value
  const sub_service = document.getElementById("sub-service").value
  const select_position = document.querySelector('input[name="position"]:checked').value
  const select_button = document.querySelector('input[name="button"]:checked').value

  const text = `javascript: WEFUN.handleGtmTagging('beta_service', {
  'action': 'button',
  'serviceName': '${service}',
  'serviceSubName': '${sub_service}',
  'position': '${select_position}',
  'buttonName': '${select_button}'
});`
  document.getElementById("result__1").value = text
}

function handleClickOpenInNewTab(id) {
  const text = `javascript: WEFUN.handleOpenInNewTab('${document.getElementById(
      `form__${id}`).value}');`
  document.getElementById(`result__${id}`).value = text
}

function handleClickChangeLinkOfCurrentTab(id) {
  const text = `javascript: WEFUN.handleChangeLinkOfCurrentTab('${document.getElementById(
      `form__${id}`).value}');`
  document.getElementById(`result__${id}`).value = text
}

function handleClickOpenTally() {
  const tally_url = document.getElementById('tally-url1').value
  const text = `javascript: WEFUN.handleTally.openTally('${tally_url}');`
  document.getElementById('result__2-1').value = text
}

function handleClickOpenTaggingAndSetData() {
  const keyInputs = document.getElementsByClassName('tagging-input-key')
  const valueInputs = document.getElementsByClassName('tagging-input-value')
  const taggingId = document.getElementById('tagging-id').value
  const taggingAction = document.getElementById('tagging-action').value
  let valueText = []
  for (let i = 0; i < keyInputs.length; i++) {
    const key = keyInputs[i].value
    const value = valueInputs[i].value
    if (key.trim() && value.trim()) {
      console.log(keyInputs.length === i - 1);
      if (keyInputs.length === i+1) {
        valueText += `  '${key}': '${value}'`
      } else {
        valueText += `  '${key}': '${value}',\n`
      }
    }
  }
  const text = `javascript: WEFUN.handleGtmTagging('${taggingId}', {
  'action': '${taggingAction}',
${valueText}
});`
  document.getElementById('result__1-2').value = text
}

function handleClickOpenTallyAndSetData() {
  const tally_url = document.getElementById('tally-url2').value
  const inputs = document.getElementsByClassName('set-data')
  let valueText = `'${tally_url}'`
  for (let i = 0; i < inputs.length; i++) {
    const text = inputs[i].value
    if (text.trim()) {
      valueText += `, '${text}'`
    }
  }
  const text = `javascript: WEFUN.handleTally.openTallyAndSetData(${valueText});`
  document.getElementById('result__2-2').value = text
}

function handleClickUrl() {
  const service_url = document.getElementById('new-service-url').value
  const text = `javascript: WEFUN_HOME.handleClickUrl('${service_url}');`
  document.getElementById('result__4-1').value = text
}

function handleChangeHomeCategory() {
  const tab_pathname = document.getElementById('home-tab-pathname').value
  const text = `javascript: WEFUN_HOME.handleChangeHomeCategory('${tab_pathname}');`
  document.getElementById('result__4-2').value = text
}

let id = 1;

function handleClickAddTagging() {
  const parent = document.getElementById(`tagging-set-data`);

  const wrapper = document.createElement('div')
  wrapper.classList.add("tagging-input-wrap")

  const keyInput = document.createElement('input');
  keyInput.type = 'text'
  keyInput.classList.add('tagging-input-key')
  keyInput.placeholder = 'ìˆ˜ì§‘í•  ì´ë²¤íŠ¸ ëª…'

  const valueInput = document.createElement('input');
  valueInput.type = 'text'
  valueInput.classList.add('tagging-input-value')
  valueInput.placeholder = 'ìˆ˜ì§‘í•  ê°’'

  wrapper.appendChild(keyInput)
  wrapper.appendChild(valueInput)
  parent.appendChild(wrapper)
}

function handleClickAdd() {
  const parent = document.getElementById(`tally-set-data`);

  const input = document.createElement('input');
  input.type = 'text'
  input.classList.add('set-data')

  parent.appendChild(input)
}
</script>
</body>
</html>
